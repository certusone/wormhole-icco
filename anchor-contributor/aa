
running 2 tests
test test_id ... ok
test cryptography::test::test_ethereum_ecrecover ... ok

test result: ok. 2 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.03s


running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

BPF SDK: /home/skojenov/.local/share/solana/install/releases/1.9.4/solana-release/bin/sdk/bpf
cargo-build-bpf child: rustup toolchain list -v
cargo-build-bpf child: cargo +bpf build --target bpfel-unknown-unknown --release
cargo-build-bpf child: /home/skojenov/.local/share/solana/install/releases/1.9.4/solana-release/bin/sdk/bpf/scripts/strip.sh /home/skojenov/git/wormhole-icco/anchor-contributor/target/bpfel-unknown-unknown/release/anchor_contributor.so /home/skojenov/git/wormhole-icco/anchor-contributor/target/deploy/anchor_contributor.so
cargo-build-bpf child: /home/skojenov/.local/share/solana/install/releases/1.9.4/solana-release/bin/sdk/bpf/dependencies/bpf-tools/llvm/bin/llvm-readelf --dyn-symbols /home/skojenov/git/wormhole-icco/anchor-contributor/target/deploy/anchor_contributor.so

To deploy this program:
  $ solana program deploy /home/skojenov/git/wormhole-icco/anchor-contributor/target/deploy/anchor_contributor.so
The program address will default to this keypair (override with --program-id):
  /home/skojenov/git/wormhole-icco/anchor-contributor/target/deploy/anchor_contributor-keypair.json

Found a 'test' script in the Anchor.toml. Running it as a test suite!

Running test suite: "/home/skojenov/git/wormhole-icco/anchor-contributor/Anchor.toml"

yarn run v1.22.15
$ /home/skojenov/git/wormhole-icco/anchor-contributor/node_modules/.bin/ts-mocha -p ./tsconfig.json -t 1000000 'tests/**/*.ts'


  anchor-contributor
    Test Preparation
      ✔ Create Dummy Sale Token (284ms)
      ✔ Mint Accepted SPL Tokens to Buyer (9780ms)
    Custodian Setup
      ✔ Create Custodian (405ms)
      ✔ Create ATAs for Custodian (3261ms)
    Conduct Successful Sale
      ✔ Create ATA for Sale Token if Non-Existent (408ms)
      ✔ Orchestrator Initialize Sale with Signed VAA (1226ms)
      ✔ Orchestrator Cannot Initialize Sale Again with Signed VAA (826ms)
      ✔ User Cannot Contribute Too Early (392ms)
      ✔ User Cannot Contribute With Bad Signature (7343ms)
      ✔ User Contributes to Sale (1655ms)
      ✔ Orchestrator Cannot Attest Contributions Too Early
      ✔ Orchestrator Attests Contributions (6492ms)
      ✔ User Cannot Contribute After Sale Ended (405ms)
      ✔ Orchestrator Cannot Seal Sale Without Allocation Bridge Transfers Redeemed (828ms)
      ✔ Orchestrator Seals Sale with Signed VAA (1623ms)
      ✔ Orchestrator Cannot Seal Sale Again with Signed VAA (831ms)
      1) Orchestrator Bridges Contributions to Conductor
      ✔ User Claims Allocations From Sale (794ms)
      ✔ User Cannot Claim Allocations Again (66ms)
    Conduct Aborted Sale
      ✔ Create ATA for Sale Token if Non-Existent
      ✔ Orchestrator Initialize Sale with Signed VAA (1120ms)
      ✔ User Contributes to Sale (9380ms)
      ✔ Orchestrator Aborts Sale with Signed VAA (1228ms)
      ✔ Orchestrator Cannot Abort Sale Again (830ms)
      ✔ User Claims Refund From Sale (411ms)
      ✔ User Cannot Claim Refund Again (57ms)


  25 passing (55s)
  1 failing

  1) anchor-contributor
       Conduct Successful Sale
         Orchestrator Bridges Contributions to Conductor:

      AssertionError: expected false to be true
      + expected - actual

      -false
      +true
      
      at Context.<anonymous> (tests/anchor-contributor.ts:506:26)
      at processImmediate (node:internal/timers:464:21)



info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
